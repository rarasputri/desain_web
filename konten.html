<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Buat Karya Baru - KaryaMuda</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.27/dist/sweetalert2.min.css">
    <style>
      :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #93c5fd;
            --secondary: #f59e0b;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --light-gray: #e2e8f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }


        nav {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links .btn-donate {
            background-color: var(--primary);
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
        }

        .nav-links .btn-donate:hover {
            background-color: var(--primary-dark);
            color: white;
        }

        .hamburger {
            display: none;
            cursor: pointer;
            font-size: 24px;
            color: var(--primary);
        }

        /* Responsive adjustments for navigation */
        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }
            .nav-links {
                position: fixed;
                top: 70px; /* Adjust based on navbar height */
                left: -100%; /* Hidden by default */
                width: 100%;
                height: calc(100vh - 70px);
                background-color: white;
                flex-direction: column;
                align-items: center;
                padding: 40px 0;
                transition: left 0.3s ease-in-out;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            }
            .nav-links.active {
                left: 0;
            }
            .nav-links li {
                margin: 15px 0;
            }
            .nav-links a {
                color: var(--dark);
            }
            .nav-links .btn-donate {
                width: fit-content;
            }
        }

        /* Input & Textarea General Styling */
        .input-style {
            border: 1px solid var(--light-gray);
            transition: border-color 0.2s, box-shadow 0.2s;
            padding: 12px 15px;
            border-radius: 8px;
            font-size: 16px;
            color: var(--dark);
        }
        .input-style:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }
        .textarea-style {
            min-height: 120px;
            resize: vertical; /* Allow vertical resizing */
        }
        .file-upload-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed var(--light-gray);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: white;
        }
        .file-upload-label:hover {
            border-color: var(--primary);
            background-color: var(--primary-light);
            color: var(--primary-dark);
        }
        .file-upload-label i {
            font-size: 48px;
            color: var(--gray);
            margin-bottom: 10px;
            transition: color 0.3s ease;
        }
        .file-upload-label:hover i {
            color: var(--primary);
        }

        /* Button Styles */
        .btn-primary {
            background-color: var(--primary);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(37, 99, 235, 0.2);
        }
        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 6px 12px rgba(37, 99, 235, 0.3);
        }
        .btn-secondary {
            background-color: var(--light-gray);
            color: var(--dark);
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-secondary:hover {
            background-color: #cbd5e1;
            transform: translateY(-1px);
        }
        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            padding: 10px 22px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        /* Modal specific styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #ffffff;
            margin: auto;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 700px;
            position: relative;
            animation: fadeIn 0.3s ease-out;
        }
        .close-button {
            color: #94a3b8;
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 30px;
            font-weight: normal;
            transition: color 0.2s;
        }
        .close-button:hover,
        .close-button:focus {
            color: var(--dark);
            text-decoration: none;
            cursor: pointer;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Stepper navigation */
        .stepper-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
            padding: 0 20px; /* Adjust padding for better look on small screens */
        }
        .stepper-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--light-gray);
            transform: translateY(-50%);
            z-index: 0;
        }
        .stepper-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            z-index: 1;
            flex: 1;
        }
        .stepper-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: 8px;
            transition: background-color 0.3s ease, transform 0.2s ease;
            font-size: 18px;
        }
        .stepper-circle.active {
            background-color: var(--primary);
            transform: scale(1.1);
        }
        .stepper-circle.completed {
            background-color: var(--success);
        }
        .stepper-label {
            font-size: 15px;
            color: var(--gray);
            font-weight: 500;
            transition: color 0.3s ease;
        }
        .stepper-step.active .stepper-label,
        .stepper-step.completed .stepper-label {
            color: var(--dark);
            font-weight: 600;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .stepper-header {
                flex-direction: column;
                align-items: flex-start;
                padding: 0;
            }
            .stepper-line {
                display: none; /* Hide line for vertical layout on mobile */
            }
            .stepper-step {
                flex-direction: row;
                align-items: center;
                text-align: left;
                margin-bottom: 20px;
                width: 100%;
            }
            .stepper-circle {
                margin-right: 15px;
                margin-bottom: 0;
            }
            .stepper-label {
                font-size: 1rem; /* Adjust font size for mobile */
            }
            .modal-content {
                padding: 20px;
            }
            .flex-col-reverse-sm {
                flex-direction: column-reverse;
            }
            .order-last-sm {
                order: 2;
            }
            .order-first-sm {
                order: 1;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <div class="navbar">
                <a href="#" class="logo">
                    <i class="fas fa-lightbulb"></i>
                    KaryaMuda
                </a>
                <ul class="nav-links" id="mainNavLinks">
                    <li><a href="home.html">Beranda</a></li>
                    <li><a href="karya.html">Karya</a></li>
                    <li><a href="newsletter.html">Berita</a></li>
                    <li><a href="about.html">Tentang</a></li>
                    <li><a href="#kontak">Kontak</a></li>
                    <li><a href="form-donasi.html" class="btn-donate">Donasi Sekarang</a></li>
                </ul>
                <div class="hamburger" id="hamburgerBtn">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <h1 class="text-3xl font-extrabold text-center text-gray-800 mb-10">Buat Karya Baru</h1>

        <div class="stepper-header relative mb-12">
            <div class="stepper-line"></div>
            <div class="stepper-step current" data-step="1">
                <div class="stepper-circle active">1</div>
                <span class="stepper-label">Detail Karya</span>
            </div>
            <div class="stepper-step" data-step="2">
                <div class="stepper-circle">2</div>
                <span class="stepper-label">Verifikasi Identitas</span>
            </div>
            <div class="stepper-step" data-step="3">
                <div class="stepper-circle">3</div>
                <span class="stepper-label">Pratinjau & Publikasi</span>
            </div>
        </div>

        <form id="campaignForm" class="bg-white shadow-xl rounded-2xl p-6 sm:p-8 space-y-8">
            <div id="step1" class="form-step active">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center sm:text-left">1. Informasi Karya</h2>
                <p class="text-gray-600 mb-8 text-center sm:text-left">Isi detail lengkap Karya donasi Anda agar menarik perhatian calon donatur.</p>

                <div class="space-y-6">
                    <div>
                        <label for="campaignTitle" class="block text-lg font-medium text-gray-700 mb-2">Judul Karya <span class="text-red-500">*</span></label>
                        <input type="text" id="campaignTitle" name="campaignTitle" 
                               class="w-full input-style" 
                               placeholder="Contoh: Bantu Pembangunan Masjid Desa Terpencil" required>
                        <p class="text-sm text-gray-500 mt-1">Buat judul yang menarik dan jelas.</p>
                    </div>

                    <div>
                        <label for="campaignDescription" class="block text-lg font-medium text-gray-700 mb-2">Deskripsi Karya <span class="text-red-500">*</span></label>
                        <textarea id="campaignDescription" name="campaignDescription" 
                                  class="w-full input-style textarea-style" 
                                  placeholder="Jelaskan secara detail mengapa Karya ini penting, siapa yang akan dibantu, dan bagaimana dana akan digunakan..." required></textarea>
                        <p class="text-sm text-gray-500 mt-1">Ceritakan kisah Karya Anda secara ringkas namun persuasif.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="targetAmount" class="block text-lg font-medium text-gray-700 mb-2">Target Donasi (IDR) <span class="text-red-500">*</span></label>
                            <div class="relative">
                                <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-semibold">Rp</span>
                                <input type="number" id="targetAmount" name="targetAmount" 
                                       class="w-full input-style pl-10" 
                                       placeholder="Contoh: 5000000" min="10000" required>
                            </div>
                            <p class="text-sm text-gray-500 mt-1">Target dana yang ingin Anda kumpulkan.</p>
                        </div>
                        <div>
                            <label for="deadline" class="block text-lg font-medium text-gray-700 mb-2">Batas Waktu Donasi <span class="text-red-500">*</span></label>
                            <input type="date" id="deadline" name="deadline" 
                                   class="w-full input-style" required>
                            <p class="text-sm text-gray-500 mt-1">Tanggal terakhir donatur bisa menyalurkan bantuannya.</p>
                        </div>
                    </div>

                    <div>
                        <label for="category" class="block text-lg font-medium text-gray-700 mb-2">Kategori Karya <span class="text-red-500">*</span></label>
                        <select id="category" name="category" class="w-full input-style" required>
                            <option value="">Pilih Kategori</option>
                            <option value="pendidikan">Pendidikan</option>
                            <option value="kesehatan">Kesehatan</option>
                            <option value="lingkungan">Lingkungan</option>
                            <option value="bencana-alam">Bencana Alam</option>
                            <option value="sosial">Sosial & Kemanusiaan</option>
                            <option value="infrastruktur">Infrastruktur</option>
                            <option value="lainnya">Lainnya</option>
                        </select>
                        <p class="text-sm text-gray-500 mt-1">Pilih kategori yang paling sesuai dengan Karya Anda.</p>
                    </div>

                    <div>
                        <label for="mediaUpload" class="block text-lg font-medium text-gray-700 mb-2">Unggah Media (Foto/Video Utama) <span class="text-red-500">*</span></label>
                        <label for="mediaUpload" class="file-upload-label">
                            <i class="fas fa-cloud-arrow-up"></i>
                            <p class="text-gray-700 font-semibold">Seret & Lepas atau Klik untuk Unggah</p>
                            <p class="text-sm text-gray-500 mt-1">Format: JPG, PNG, MP4. Maks. 5MB.</p>
                            <input type="file" id="mediaUpload" name="mediaUpload" class="hidden" accept="image/*,video/*" required>
                        </label>
                        <div id="filePreviewContainer" class="mt-4 hidden grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                            </div>
                    </div>
                </div>

                <div class="flex justify-end mt-10">
                    <button type="button" id="nextStep1" class="btn-primary">Lanjut ke Verifikasi <i class="fas fa-arrow-right ml-2"></i></button>
                </div>
            </div>

            <div id="step2" class="form-step hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center sm:text-left">2. Verifikasi Identitas</h2>
                <p class="text-gray-600 mb-8 text-center sm:text-left">Untuk menjamin keamanan dan kepercayaan, Anda perlu memverifikasi identitas Anda. Data Anda akan dijaga kerahasiaannya.</p>

                <div class="space-y-6">
                    <div>
                        <label for="fullName" class="block text-lg font-medium text-gray-700 mb-2">Nama Lengkap Sesuai KTP <span class="text-red-500">*</span></label>
                        <input type="text" id="fullName" name="fullName" class="w-full input-style" placeholder="Nama lengkap Anda" required>
                    </div>
                    <div>
                        <label for="nik" class="block text-lg font-medium text-gray-700 mb-2">Nomor Induk Kependudukan (NIK) KTP <span class="text-red-500">*</span></label>
                        <input type="text" id="nik" name="nik" class="w-full input-style" placeholder="Contoh: 320XXXXXXXXXXXXX" minlength="16" maxlength="16" required pattern="[0-9]{16}">
                        <p class="text-sm text-gray-500 mt-1">Pastikan NIK Anda benar dan valid.</p>
                    </div>
                    <div>
                        <label for="ktpUpload" class="block text-lg font-medium text-gray-700 mb-2">Unggah Foto KTP <span class="text-red-500">*</span></label>
                        <label for="ktpUpload" class="file-upload-label">
                            <i class="fas fa-id-card"></i>
                            <p class="text-gray-700 font-semibold">Seret & Lepas atau Klik untuk Unggah Foto KTP</p>
                            <p class="text-sm text-gray-500 mt-1">Pastikan foto KTP jelas dan terbaca. Maks. 2MB, JPG/PNG.</p>
                            <input type="file" id="ktpUpload" name="ktpUpload" class="hidden" accept="image/jpeg,image/png" required>
                        </label>
                        <div id="ktpPreviewContainer" class="mt-4 hidden">
                            </div>
                    </div>
                    <div>
                        <label for="selfieWithKtp" class="block text-lg font-medium text-gray-700 mb-2">Unggah Foto Selfie dengan KTP <span class="text-red-500">*</span></label>
                        <label for="selfieWithKtp" class="file-upload-label">
                            <i class="fas fa-camera"></i>
                            <p class="text-gray-700 font-semibold">Seret & Lepas atau Klik untuk Unggah Selfie dengan KTP</p>
                            <p class="text-sm text-gray-500 mt-1">Pastikan wajah dan KTP terlihat jelas. Maks. 2MB, JPG/PNG.</p>
                            <input type="file" id="selfieWithKtp" name="selfieWithKtp" class="hidden" accept="image/jpeg,image/png" required>
                        </label>
                        <div id="selfiePreviewContainer" class="mt-4 hidden">
                            </div>
                    </div>

                    <div class="flex items-center mt-6">
                        <input type="checkbox" id="agreeTerms" name="agreeTerms" class="h-5 w-5 text-primary-blue rounded border-gray-300 focus:ring-primary-blue" required>
                        <label for="agreeTerms" class="ml-3 text-base text-gray-700">
                            Saya telah membaca dan menyetujui <button type="button" id="openTermsModal" class="text-primary-blue hover:underline font-semibold">Syarat & Ketentuan</button> KaryaMuda. <span class="text-red-500">*</span>
                        </label>
                    </div>
                </div>

                <div class="flex justify-between mt-10">
                    <button type="button" id="prevStep2" class="btn-secondary"><i class="fas fa-arrow-left mr-2"></i> Kembali</button>
                    <button type="button" id="nextStep2" class="btn-primary">Lanjut ke Pratinjau <i class="fas fa-arrow-right ml-2"></i></button>
                </div>
            </div>

            <div id="step3" class="form-step hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center sm:text-left">3. Pratinjau Karya Anda</h2>
                <p class="text-gray-600 mb-8 text-center sm:text-left">Ini adalah tampilan Karya Anda sebelum dipublikasikan. Pastikan semua informasi sudah benar.</p>

                <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8 text-gray-700 flex flex-col sm:flex-row items-start gap-4">
                    <i class="fas fa-circle-info text-primary-dark text-3xl"></i>
                    <div>
                        <p class="font-semibold text-lg text-primary-dark mb-1">Penting!</p>
                        <p class="text-base">Periksa kembali semua detail sebelum menekan tombol "Publikasikan Karya". Karya akan ditinjau oleh tim kami sebelum benar-benar aktif.</p>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200">
                    <img id="previewMedia" src="" alt="Campaign Media Preview" class="w-full h-64 object-cover">
                    <div class="p-6">
                        <span id="previewCategory" class="inline-block bg-primary-light text-primary-dark text-xs font-semibold px-3 py-1 rounded-full mb-3"></span>
                        <h3 id="previewTitle" class="text-2xl font-bold text-gray-800 mb-2"></h3>
                        <p id="previewDescription" class="text-gray-600 text-base leading-relaxed mb-4"></p>
                        
                        <div class="flex justify-between items-center mb-4">
                            <div>
                                <p class="text-gray-500 text-sm">Target Donasi:</p>
                                <p id="previewTarget" class="text-primary-blue font-bold text-xl"></p>
                            </div>
                            <div>
                                <p class="text-gray-500 text-sm">Batas Waktu:</p>
                                <p id="previewDeadline" class="font-bold text-md text-gray-700"></p>
                            </div>
                        </div>

                        <div class="bg-gray-100 rounded-lg p-4 text-sm text-gray-700">
                            <p class="font-semibold mb-2">Informasi Pembuat Karya:</p>
                            <p><i class="fas fa-user-circle mr-2 text-gray-500"></i> <span id="previewFullName"></span></p>
                            <p><i class="fas fa-id-card-clip mr-2 text-gray-500"></i> NIK: <span id="previewNik"></span></p>
                            <p class="text-xs text-gray-500 mt-2">Data ini tidak akan ditampilkan kepada publik, hanya untuk verifikasi internal.</p>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between mt-10 flex-col-reverse-sm sm:flex-row">
                    <button type="button" id="prevStep3" class="btn-secondary order-last-sm mt-4 sm:mt-0"><i class="fas fa-arrow-left mr-2"></i> Kembali ke Verifikasi</button>
                    <button type="submit" id="publishCampaignBtn" class="btn-primary order-first-sm">Publikasikan Karya <i class="fas fa-paper-plane ml-2"></i></button>
                </div>
            </div>
        </form>
    </div>

    <div id="termsModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeTermsModalBtn">&times;</span>
            <h3 class="text-2xl font-bold text-gray-800 mb-5">Syarat & Ketentuan KaryaMuda</h3>
            <div class="max-h-96 overflow-y-auto pr-4 text-gray-700">
                <p>Selamat datang di platform KaryaMuda. Dengan mengakses atau menggunakan layanan kami, Anda setuju untuk terikat oleh syarat dan ketentuan yang dijelaskan di bawah ini. Harap baca dengan seksama.</p>

                <h4 class="font-semibold text-xl text-gray-800 mt-6 mb-3">1. Penerimaan Syarat</h4>
                <p>Dengan menggunakan layanan kami, Anda menegaskan bahwa Anda telah membaca, memahami, dan setuju untuk terikat oleh Syarat dan Ketentuan ini, serta Kebijakan Privasi kami. Jika Anda tidak setuju dengan bagian mana pun dari syarat-syarat ini, Anda tidak boleh menggunakan layanan kami.</p>

                <h4 class="font-semibold text-xl text-gray-800 mt-6 mb-3">2. Akun Pengguna</h4>
                <ul class="list-disc list-inside space-y-2 pl-4">
                    <li>Anda bertanggung jawab menjaga **kerahasiaan informasi akun dan kata sandi** Anda.</li>
                    <li>Anda bertanggung jawab atas semua aktivitas yang terjadi di bawah akun Anda.</li>
                    <li>Anda harus segera memberitahu kami tentang **penggunaan tidak sah** pada akun Anda.</li>
                </ul>

                <h4 class="font-semibold text-xl text-gray-800 mt-6 mb-3">3. Donasi dan Karya</h4>
                <ul class="list-disc list-inside space-y-2 pl-4">
                    <li>Semua donasi yang dilakukan bersifat **final dan tidak dapat dikembalikan**, kecuali ditentukan lain oleh kebijakan kami atau hukum yang berlaku.</li>
                    <li>KaryaMuda bertindak sebagai perantara untuk menyalurkan donasi. Kami akan berusaha menyalurkan dana sesuai tujuan Karya.</li>
                    <li>Untuk membuat Karya, Anda mungkin perlu melengkapi **verifikasi identitas tambahan**.</li>
                </ul>

                <h4 class="font-semibold text-xl text-gray-800 mt-6 mb-3">4. Konten Pengguna</h4>
                <p>Anda bertanggung jawab penuh atas **konten yang Anda unggah, publikasikan, atau tampilkan** melalui layanan kami. Anda tidak boleh mengunggah konten yang melanggar hukum, memfitnah, mengancam, atau melanggar hak kekayaan intelektual pihak lain.</p>

                <h4 class="font-semibold text-xl text-gray-800 mt-6 mb-3">5. Batasan Tanggung Jawab</h4>
                <p>KaryaMuda tidak bertanggung jawab atas kerugian langsung, tidak langsung, insidental, khusus, konsekuensial, atau ganti rugi yang timbul dari penggunaan atau ketidakmampuan menggunakan layanan kami, bahkan jika KaryaMuda telah diberitahu tentang kemungkinan kerugian tersebut.</p>

                <h4 class="font-semibold text-xl text-gray-800 mt-6 mb-3">6. Perubahan Syarat & Ketentuan</h4>
                <p>Kami berhak untuk mengubah atau memperbarui Syarat dan Ketentuan ini kapan saja. Perubahan akan berlaku segera setelah diposting di situs kami. Anda disarankan untuk **meninjau halaman ini secara berkala** untuk perubahan.</p>

                <h4 class="font-semibold text-xl text-gray-800 mt-6 mb-3">7. Hukum yang Berlaku</h4>
                <p>Syarat dan Ketentuan ini akan diatur dan ditafsirkan sesuai dengan **hukum Republik Indonesia**.</p>

                <h4 class="font-semibold text-xl text-gray-800 mt-6 mb-3">8. Hubungi Kami</h4>
                <p>Jika Anda memiliki pertanyaan tentang Syarat dan Ketentuan ini, silakan hubungi kami melalui <a href="#" class="text-primary-blue hover:underline font-medium">halaman kontak kami</a>.</p>

                <p class="text-sm text-gray-600 mt-8 border-t pt-4 border-gray-200">Terakhir diperbarui: 17 Juli 2025</p>
                </div>
            <div class="flex justify-end mt-6">
                <button type="button" id="agreeAndCloseTerms" class="btn-primary">Setuju & Tutup</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.27/dist/sweetalert2.all.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('campaignForm');
            const steps = document.querySelectorAll('.form-step');
            const stepperCircles = document.querySelectorAll('.stepper-circle');
            const stepperSteps = document.querySelectorAll('.stepper-step');
            let currentStep = 0; // 0-indexed

            const nextStep1Btn = document.getElementById('nextStep1');
            const prevStep2Btn = document.getElementById('prevStep2');
            const nextStep2Btn = document.getElementById('nextStep2');
            const prevStep3Btn = document.getElementById('prevStep3');

            const mediaUploadInput = document.getElementById('mediaUpload');
            const filePreviewContainer = document.getElementById('filePreviewContainer');
            const ktpUploadInput = document.getElementById('ktpUpload');
            const ktpPreviewContainer = document.getElementById('ktpPreviewContainer');
            const selfieWithKtpInput = document.getElementById('selfieWithKtp');
            const selfiePreviewContainer = document.getElementById('selfiePreviewContainer');

            const openTermsModalBtn = document.getElementById('openTermsModal');
            const termsModal = document.getElementById('termsModal');
            const closeTermsModalBtn = document.getElementById('closeTermsModalBtn');
            const agreeAndCloseTermsBtn = document.getElementById('agreeAndCloseTerms');
            const agreeTermsCheckbox = document.getElementById('agreeTerms');

            // --- Stepper & Form Navigation Logic ---
            function showStep(stepIndex) {
                steps.forEach((step, index) => {
                    step.classList.add('hidden');
                    step.classList.remove('active'); // Remove active class from previous steps
                    stepperCircles[index].classList.remove('active', 'completed');
                    stepperSteps[index].classList.remove('active', 'completed');

                    if (index < stepIndex) {
                        stepperCircles[index].classList.add('completed');
                        stepperSteps[index].classList.add('completed');
                        stepperCircles[index].innerHTML = '<i class="fas fa-check text-white"></i>'; // Checkmark for completed
                    } else {
                        stepperCircles[index].innerHTML = (index + 1); // Reset to number if not completed
                    }
                });

                steps[stepIndex].classList.remove('hidden');
                steps[stepIndex].classList.add('active');
                stepperCircles[stepIndex].classList.add('active');
                stepperSteps[stepIndex].classList.add('active');
                stepperCircles[stepIndex].innerHTML = (stepIndex + 1); // Always show number for current/active
            }

            function validateStep(stepIndex) {
                let isValid = true;
                const currentInputs = steps[stepIndex].querySelectorAll('[required]');
                currentInputs.forEach(input => {
                    if (!input.checkValidity()) {
                        isValid = false;
                        input.reportValidity(); // Show browser's default validation message
                    }
                });

                if (stepIndex === 1) { // Additional validation for Step 2
                    if (!agreeTermsCheckbox.checked) {
                        // Using SweetAlert for terms agreement validation
                        Swal.fire({
                            icon: 'warning',
                            title: 'Persetujuan Syarat & Ketentuan',
                            text: 'Anda harus menyetujui Syarat & Ketentuan KaryaMuda untuk melanjutkan.',
                            confirmButtonText: 'Oke',
                            customClass: {
                                confirmButton: 'btn-primary' // Apply Tailwind class to SweetAlert button
                            },
                            buttonsStyling: false
                        });
                        isValid = false;
                    }
                }
                return isValid;
            }

            nextStep1Btn.addEventListener('click', () => {
                if (validateStep(0)) {
                    currentStep = 1;
                    showStep(currentStep);
                }
            });

            prevStep2Btn.addEventListener('click', () => {
                currentStep = 0;
                showStep(currentStep);
            });

            nextStep2Btn.addEventListener('click', () => {
                if (validateStep(1)) {
                    currentStep = 2;
                    showStep(currentStep);
                    updatePreview(); // Update preview when moving to step 3
                }
            });

            prevStep3Btn.addEventListener('click', () => {
                currentStep = 1;
                showStep(currentStep);
            });

            // Initial step display
            showStep(currentStep);

            // --- Media Upload & Preview Logic ---
            function setupImagePreview(inputElement, previewContainer) {
                inputElement.addEventListener('change', function(event) {
                    previewContainer.innerHTML = ''; // Clear previous previews
                    previewContainer.classList.add('hidden'); // Hide by default
                    const files = event.target.files;

                    if (files.length > 0) {
                        previewContainer.classList.remove('hidden');
                        for (let i = 0; i < files.length; i++) {
                            const file = files[i];
                            const reader = new FileReader();

                            reader.onload = function(e) {
                                const fileType = file.type.split('/')[0]; // "image" or "video"
                                const previewElement = document.createElement('div');
                                previewElement.className = 'relative group';

                                if (fileType === 'image') {
                                    previewElement.innerHTML = `
                                        <img src="${e.target.result}" alt="Preview" class="w-full h-32 object-cover rounded-lg shadow-sm border border-gray-200">
                                        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg">
                                            <i class="fas fa-eye text-white text-xl"></i>
                                        </div>
                                    `;
                                } else if (fileType === 'video') {
                                    previewElement.innerHTML = `
                                        <video src="${e.target.result}" controls class="w-full h-32 object-cover rounded-lg shadow-sm border border-gray-200"></video>
                                        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg">
                                            <i class="fas fa-play-circle text-white text-xl"></i>
                                        </div>
                                    `;
                                }

                                previewContainer.appendChild(previewElement);
                            };
                            reader.readAsDataURL(file);
                        }
                    }
                });
            }

            setupImagePreview(mediaUploadInput, filePreviewContainer);
            setupImagePreview(ktpUploadInput, ktpPreviewContainer);
            setupImagePreview(selfieWithKtpInput, selfiePreviewContainer);

            // --- Terms & Conditions Modal Logic ---
            openTermsModalBtn.addEventListener('click', () => {
                termsModal.style.display = 'flex';
            });

            closeTermsModalBtn.addEventListener('click', () => {
                termsModal.style.display = 'none';
            });

            agreeAndCloseTermsBtn.addEventListener('click', () => {
                agreeTermsCheckbox.checked = true; // Automatically check the checkbox
                termsModal.style.display = 'none';
            });

            window.addEventListener('click', (event) => {
                if (event.target === termsModal) {
                    termsModal.style.display = 'none';
                }
            });

            // --- Preview Logic (Step 3) ---
            function updatePreview() {
                document.getElementById('previewTitle').textContent = document.getElementById('campaignTitle').value || 'Judul Karya Anda';
                document.getElementById('previewDescription').textContent = document.getElementById('campaignDescription').value || 'Deskripsi Karya akan muncul di sini.';
                
                const targetAmount = parseFloat(document.getElementById('targetAmount').value);
                document.getElementById('previewTarget').textContent = targetAmount ? `Rp ${targetAmount.toLocaleString('id-ID')}` : 'Rp 0';
                
                const deadlineDate = document.getElementById('deadline').value;
                document.getElementById('previewDeadline').textContent = deadlineDate ? new Date(deadlineDate).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' }) : 'Belum Ditentukan';
                
                const categorySelect = document.getElementById('category');
                const selectedCategoryText = categorySelect.options[categorySelect.selectedIndex].text;
                document.getElementById('previewCategory').textContent = selectedCategoryText || 'Kategori';

                document.getElementById('previewFullName').textContent = document.getElementById('fullName').value || 'Nama Pembuat';
                document.getElementById('previewNik').textContent = document.getElementById('nik').value || 'Belum Terisi';

                // Update media preview
                if (mediaUploadInput.files.length > 0) {
                    const file = mediaUploadInput.files[0];
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('previewMedia').src = e.target.result;
                        if (file.type.startsWith('video')) {
                            // For simplicity, just display placeholder if video, or you can embed video tag
                            document.getElementById('previewMedia').src = 'https://placehold.co/600x400/F5F5F5/B0B0B0?text=Video+Preview';
                        }
                    };
                    reader.readAsDataURL(file);
                } else {
                    document.getElementById('previewMedia').src = 'https://placehold.co/600x400/F5F5F5/B0B0B0?text=Preview+Media'; // Placeholder image
                }
            }

            // --- Form Submission Logic (with SweetAlert and redirect) ---
            form.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent actual form submission

                if (validateStep(2)) { // Validate final step
                    // In a real application, you would send the form data to your backend here
                    // For demonstration, we'll simulate success.
                    // const formData = new FormData(form);
                    // fetch('/api/create-campaign', {
                    //     method: 'POST',
                    //     body: formData
                    // })
                    // .then(response => response.json())
                    // .then(data => {
                    //     if (data.success) {
                    Swal.fire({
                        title: 'Karya Berhasil Diajukan!',
                        text: 'Tim kami akan segera meninjau Karya Anda. Proses peninjauan mungkin memakan waktu 1-3 hari kerja.',
                        icon: 'success',
                        confirmButtonText: 'Oke',
                        customClass: {
                            confirmButton: 'btn-primary'
                        },
                        buttonsStyling: false // Penting untuk mengaktifkan kustomisasi CSS Tailwind
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href = 'profile.html'; // Ganti dengan URL halaman profil Anda
                        }
                    });
                    //     } else {
                    //         Swal.fire('Gagal!', data.message || 'Terjadi kesalahan saat mengajukan Karya.', 'error');
                    //     }
                    // })
                    // .catch((error) => {
                    //     console.error('Error:', error);
                    //     Swal.fire('Error!', 'Tidak dapat terhubung ke server. Silakan coba lagi.', 'error');
                    // });
                }
            });
        });
    </script>
</body>
</html>